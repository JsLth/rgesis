<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Download survey data — gesis_data • rgesis</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="../deps/MathJax-3.2.2/tex-chtml.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Download survey data — gesis_data"><meta name="description" content="Downloads survey data from GESIS given a record or a dataset ID. To download
data, the session must be authenticated using gesis_auth.
By downloading data from the GESIS data archive, you agree to its
terms of use.
This function is intended to be used for singular, programmatic access to
survey datasets. Please refrain from using it for large-scale batch
downloads."><meta property="og:description" content="Downloads survey data from GESIS given a record or a dataset ID. To download
data, the session must be authenticated using gesis_auth.
By downloading data from the GESIS data archive, you agree to its
terms of use.
This function is intended to be used for singular, programmatic access to
survey datasets. Please refrain from using it for large-scale batch
downloads."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rgesis</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home"></span> Overview</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/gesis-data.html"><span class="fa fa-book"></span> Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-search"></span> Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jslth/rgesis/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Download survey data</h1>
      <small class="dont-index">Source: <a href="https://github.com/jslth/rgesis/blob/main/R/gesis_data.R" class="external-link"><code>R/gesis_data.R</code></a></small>
      <div class="d-none name"><code>gesis_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Downloads survey data from GESIS given a record or a dataset ID. To download
data, the session must be authenticated using <code><a href="gesis_auth.html">gesis_auth</a></code>.</p>
<p>By downloading data from the GESIS data archive, you agree to its
<a href="https://www.gesis.org/fileadmin/upload/dienstleistung/daten/umfragedaten/_bgordnung_bestellen/2023-06-30_Usage_regulations.pdf" class="external-link">terms of use</a>.
This function is intended to be used for singular, programmatic access to
survey datasets. Please refrain from using it for large-scale batch
downloads.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">gesis_data</span><span class="op">(</span></span>
<span>  <span class="va">record</span>,</span>
<span>  download_purpose <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"dataset"</span>,</span>
<span>  select <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  prompt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-record">record<a class="anchor" aria-label="anchor" href="#arg-record"></a></dt>
<dd><p>Object of class <code>gesis_record</code> as returned by
<code><a href="gesis_search.html">gesis_search</a></code> and <code>gesis_get</code> or dataset ID. If a dataset ID
is passed, the function performs a call to <code><a href="gesis_get.html">gesis_get</a></code>.</p></dd>


<dt id="arg-download-purpose">download_purpose<a class="anchor" aria-label="anchor" href="#arg-download-purpose"></a></dt>
<dd><p>Purpose for the use of the research data. You are
required to use the downloaded data solely for the specified purpose
(see also the
<a href="https://www.gesis.org/fileadmin/upload/dienstleistung/daten/umfragedaten/_bgordnung_bestellen/2023-06-30_Usage_regulations.pdf" class="external-link">terms of use</a>).
The following values are supported:</p>
<ul><li><p><code>final_thesis</code>: for final thesis of the study programme (e.g. Bachelor/Master thesis)</p></li>
<li><p><code>commercial_research</code>: for research with a commercial mission</p></li>
<li><p><code>non_scientific</code>: for non-scientific purposes</p></li>
<li><p><code>further_education</code>: for further education and qualification</p></li>
<li><p><code>scientific_research</code>: for scientific research (incl. doctorate)</p></li>
<li><p><code>studies</code>: in the course of my studies</p></li>
<li><p><code>lecturer</code>: in a course as a lecturer</p></li>
</ul></dd>


<dt id="arg-path">path<a class="anchor" aria-label="anchor" href="#arg-path"></a></dt>
<dd><p>Path where the downloaded file should be stored. Can be path
to a directory or a file. If a directory path, it is attempted to infer the
file name from the file to be downloaded. If this is not possible, the file
is stored in a file called <code>gesis</code> with no file extension. If a file
path is passed, the file is directly downloaded to this path. Defaults to
a temporary directory path.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>Type of data to download. The following values are supported:</p>
<ul><li><p><code>dataset</code>: Survey dataset, usually in a Stata or SPSS data format</p></li>
<li><p><code>questionnaire</code>: Survey questionnaire, usually in PDF format</p></li>
<li><p><code>codebook</code>: Survey codebook, usually in PDF format</p></li>
<li><p><code>otherdocs</code>: Other files like READMEs, method
reports, or variable lists, usually in PDF format</p></li>
<li><p><code>uncategorized</code>: Other files that are not categorized, usually
used for external links to full texts (DOI, URN)</p></li>
</ul><p>Defaults to <code>"dataset"</code> because downloading PDF or HTML files rarely
makes sense in R. A list of available data types for a given record can be
retrieved using <code><a href="gesis_files.html">gesis_file_types</a></code>.</p></dd>


<dt id="arg-select">select<a class="anchor" aria-label="anchor" href="#arg-select"></a></dt>
<dd><p>Character string to select a data file in case multiple files
are available for the selected data type. The character string is
matched against the file label using regular expressions. This argument
can also be used to match explicitly for file extensions, e.g.
<code>"\\.sav"</code> or <code>"\\.dat"</code>. A list of file labels for a given
record can be retrieved using <code><a href="gesis_files.html">gesis_files</a></code>. If <code>NULL</code>,
multiple files are detected, and the session is interactive, prompts the
user to select a file. Defaults to <code>NULL</code>.</p></dd>


<dt id="arg-prompt">prompt<a class="anchor" aria-label="anchor" href="#arg-prompt"></a></dt>
<dd><p>If <code>TRUE</code>, allows the function to open an interactive
prompt in case multiple files are found and <code>select</code> is either
<code>NULL</code> or fails to select a file unambiguously. If <code>FALSE</code>,
throws an error in such a case. Defaults to <code>TRUE</code> if run in an
interactive session.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The path to the downloaded file. Depending on the selected file,
there are different ways to read the file contents. Traditionally, data
files are offered in Stata and SPSS file formats and can be read using the
<a href="https://haven.tidyverse.org/" class="external-link">haven</a> package.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Access and refresh tokens are automatically attached to the requests sent
if possible. This is done only for URLs pointing to the domain gesis.org
to avoid sending authentication information to other domains.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># retrieve a search record to pass on to gesis_data()</span></span></span>
<span class="r-in"><span><span class="va">record</span> <span class="op">&lt;-</span> <span class="fu"><a href="gesis_search.html">gesis_search</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"allbus"</span>,</span></span>
<span class="r-in"><span>  publication_year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2019</span>, <span class="fl">2020</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  type <span class="op">=</span> <span class="st">"research_data"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># in interactive mode, the function can be run without arguments</span></span></span>
<span class="r-in"><span><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu">gesis_data</span><span class="op">(</span><span class="va">record</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># in other cases, certain arguments should be provided</span></span></span>
<span class="r-in"><span><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu">gesis_data</span><span class="op">(</span><span class="va">record</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, download_purpose <span class="op">=</span> <span class="st">"non_scientific"</span>, select <span class="op">=</span> <span class="st">"\\.sav"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># you can also simply pass a dataset ID</span></span></span>
<span class="r-in"><span><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu">gesis_data</span><span class="op">(</span><span class="st">"ZA3753"</span>, select <span class="op">=</span> <span class="st">"\\.por"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># data files must be read using other tools and packages, e.g. haven</span></span></span>
<span class="r-in"><span><span class="fu">haven</span><span class="fu">::</span><span class="fu"><a href="https://haven.tidyverse.org/reference/read_spss.html" class="external-link">read_por</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ... or pdftools</span></span></span>
<span class="r-in"><span><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu">gesis_data</span><span class="op">(</span><span class="st">"ZA3753"</span>, select <span class="op">=</span> <span class="st">"fb\\.pdf"</span>, type <span class="op">=</span> <span class="st">"questionnaire"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">pdftools</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/pdftools//reference/pdftools.html" class="external-link">pdf_text</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jonas Lieth.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

